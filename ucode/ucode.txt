# cpu2 microcode

def r0 0b0000;
def r2 0b0001;
def r4 0b0010;
def r6 0b0011;
def r1 0b0100;
def r3 0b0101;
def r5 0b0110;
def r7 0b0111;

def arlo 0b1000;
def arhi 0b1001;
def pclo 0b1010;
def pchi 0b1011;
def mem 0b1100;

signal rd_dev[4] default 0b1111;
signal wr_dev[4] default 0b1111;
signal end[1] default 0;

template mov(dest_dev, src_dev) {
  rd_dev=src_dev;
  wr_dev=dest_dev;
  wr_dev=default;
  rd_dev=default, end=1;
}

ins(0) {
  end=1;
}

ins(1) {
  mov(r0, r1);
}
